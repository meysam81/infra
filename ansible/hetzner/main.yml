- name: Configure monitoring
  hosts: hetzner
  gather_facts: true
  become: true
  vars_files:
    - ./vars.yml
  roles:
    - monitoring
- name: Configure K8s networking
  hosts: hetzner
  gather_facts: true
  become: true
  environment:
    KUBECONFIG: /home/meysam/.kube/config
  tags:
    - network
  roles:
    - cilium
- name: Configure K8s gitops
  hosts: hetzner
  gather_facts: true
  become: true
  environment:
    KUBECONFIG: /home/meysam/.kube/config
  tags:
    - gitops
  roles:
    - fluxcd
- name: Configure K8s OIDC
  hosts: hetzner
  gather_facts: true
  become: true
  tags:
    - oidc
  vars:
    kubeconfig: /home/meysam/.kube/config
  vars_files:
    - ./vars.yml
  roles:
    - k8s-oidc
