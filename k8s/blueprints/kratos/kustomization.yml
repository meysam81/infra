configMapGenerator:
  - name: kratos-config
    files:
      - config.yml=kratos-server-config.yml
    behavior: replace
  - name: kratos-schemas
    files:
      - schemas/admin.schema.json
  - name: kratos-jsonnet
    files:
      - jsonnet-mappers/debug.jsonnet
      - jsonnet-mappers/google.jsonnet

resources:
  - https://github.com/meysam81/kustomizations//kratos/overlays/vm/?ref=v2.4.0
  - httproute.yml
  - externalsecret.yml
  - rule.yml
  - ciliumnetworkpolicy.yml

images:
  - name: oryd/kratos
    newTag: v1.3.1

patches:
  - path: deployment-merge.yml

labels:
  - includeSelectors: true
    includeTemplates: true
    pairs:
      app.kubernetes.io/component: kratos
      app.kubernetes.io/instance: kratos
      app.kubernetes.io/managed-by: Kustomize
      app.kubernetes.io/name: kratos
      app.kubernetes.io/part-of: kratos
      app.kubernetes.io/version: v1.0.0

namespace: auth
